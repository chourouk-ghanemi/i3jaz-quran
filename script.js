// script.js
document.addEventListener('DOMContentLoaded', () => {
  const searchInput = document.getElementById('search');
  const cards = Array.from(document.querySelectorAll('.card'));
  const modal = document.getElementById('modal');
  const modalTitle = document.getElementById('modalTitle');
  const modalVerse = document.getElementById('modalVerse');
  const modalContent = document.getElementById('modalContent');
  const modalClose = document.getElementById('modalClose');
  const copyBtn = document.getElementById('copyBtn');
  const shareWA = document.getElementById('shareWA');
  const themeToggle = document.getElementById('themeToggle');

 const details = {
    'توسع الكون': {
      verse: 'وَالسَّمَاءَ بَنَيْنَاهَا بِأَيْدٍ وَإِنَّا لَمُوسِعُونَ -- (الذاريات: 47)',
      content:
`شرح مبسط:
الآية تشير إلى أن السماء في حالة "توسع" -- هذا المفهوم يتقاطع مع اكتشاف علمي حديث مفاده أن الكون يتمدد (نظرية تمدد الكون والانفجار العظيم).
مراجع مختصرة: يمكن الرجوع إلى كتب الفلك والمقالات العلمية حول توسع الكون وقياسات الانزياح الأحمر.`
    },
    'مراحل خلق الجنين': {
      verse: 'ثُمَّ خَلَقْنَا النُّطْفَةَ عَلَقَةً... -- (المؤمنون: 14)',
      content:
`شرح مبسط:
القرآن وصف مراحل التكوين بلفظيات متسلسلة، والبحوث الطبية لاحظت تطابقًا مرحليًا مسموحًا للتفسير؛ هذه مقاربة تبين التقاطع بين النص والوصف العلمي الحديث.`
    },
    'دور الجبال في توازن الأرض': {
      verse: 'وَأَلْقَى فِي الْأَرْضِ رَوَاسِيَ أَنْ تَمِيدَ بِكُمْ -- (النحل: 15)',
      content:`الجبال لها دور مهم جداً في توازن القشرة الأرضية وتماسكها، وهذا أمر أكّده العلم الحديث وأشار إليه القرآن الكريم قبل قرون.
من الناحية العلمية
الجبال ليست مجرد كتل حجرية فوق سطح الأرض، بل لها امتدادات عميقة في باطن الأرض تشبه الجذور، وهذا يساعد على تثبيت الصفائح الأرضية ومنعها من الحركة العشوائية.
بفضل هذا التثبيت، تقلّ الزلازل والانزلاقات الكبيرة التي قد تهدد الحياة.
العلماء يسمون هذا الدور "التثبيت التكتوني"، حيث تعمل الجبال كموازين ضخمة للقشرة الأرضية.
في القرآن الكريم
ورد ذكر دور الجبال في تثبيت الأرض في أكثر من آية، منها:
﴿وَأَلْقَىٰ فِي ٱلۡأَرۡضِ رَوَاسِیَ أَن تَمِیدَ بِكُمۡ﴾
(سورة النحل، آية 15)
أي: جعل الله في الأرض جبالاً راسخة حتى لا تميل أو تضطرب بكم.
وأيضاً:
﴿وَجَعَلۡنَا فِي ٱلۡأَرۡضِ رَوَاسِيَ أَن تَمِيدَ بِهِمۡ﴾
(سورة الأنبياء، آية 31)
وفي موضع آخر شبهها بالأوتاد:
﴿أَلَمۡ نَجۡعَلِ ٱلۡأَرۡضَ مِهَـٰدࣰا ٦ وَٱلۡجِبَالَ أَوۡتَادࣰا ٧﴾
(سورة النبأ، آية 6-7)
`
    },
          'طبقات الأرض':{
      verse: '﴿اللَّهُ الَّذِي خَلَقَ سَبْعَ سَمَاوَاتٍ وَمِنَ الأَرْضِ مِثْلَهُنَّ﴾ [الطلاق: 12]',
      content:`في القرآن الكريم
وردت الإشارة إلى أن الأرض ذات طبقات في أكثر من موضع، منها:
﴿ٱللَّهُ ٱلَّذِی خَلَقَ سَبۡعَ سَمَـٰوَ ٰ⁠تࣲ وَمِنَ ٱلۡأَرۡضِ مِثۡلَهُنَّ﴾
(سورة الطلاق، آية 12)
أي أن للأرض طبقات أو مستويات، كما للسماوات، لكن الفرق أن طبقات الأرض ليست متفرقة كالسماوات، بل متراصة فوق بعضها.
﴿لَّهُ مَا فِی ٱلسَّمَـٰوَ ٰ⁠تِ وَمَا فِی ٱلۡأَرۡضِ وَمَا بَیۡنَهُمَا وَمَا تَحۡتَ ٱلثَّرَىٰ﴾
(سورة طه، آية 6)
إشارة إلى ما في أعماق الأرض تحت التربة (الثرى).
  العلم الحديث يقسم الأرض إلى طبقات رئيسية متوافقة بشكل لافت مع فكرة "سبع طبقات" إذا أخذناها بمقياس علمي (من الخارج إلى الداخل):
القشرة القارية (يابسة).
القشرة المحيطية (تحت البحار).
الوشاح العلوي.
الوشاح السفلي.
اللب الخارجي السائل.
اللب الداخلي الصلب.
الغلاف الجوي للأرض (أو يمكن اعتبار الغلاف الصخري والمحيطي طبقات فرعية).
بعض العلماء المسلمين يرون أن "سبع أراضين" قد تُفهم على أنها سبع مناطق أو طبقات جيولوجية مختلفة في تكوينها وخواصها. 

`

  },
   'الحواجز بين البحار':{
      verse: '﴿مَرَجَ البَحرَيْنِ يَلتَقِيَانِ ۝ بَيْنَهُمَا بَرْزَخٌ لا يَبْغِيَانِ﴾ [الرحمن: 19-20]',
      content:`عندما يلتقي بحران لهما خصائص فيزيائية مختلفة – مثل الملوحة، والكثافة، ودرجة الحرارة – فإنهما لا يمتزجان فورًا بشكل كامل، بل يبقى بينهما حاجز مائي غير مرئي يعرفه علماء المحيطات باسم البرزخ المائي (Oceanic Front أو Halocline إذا كان الاختلاف في الملوحة).
هذا الحاجز يعمل على إبطاء عملية الاختلاط.
يمكن ملاحظة هذه الظاهرة في مناطق التقاء مياه البحر المتوسط بمياه المحيط الأطلسي عبر مضيق جبل طارق، أو التقاء نهر الأمازون بمياه المحيط الأطلسي.
الاختلاف في الكثافة (بسبب الملوحة والحرارة) هو السبب الأساسي لوجود هذا البرزخ.
التفسير العلمي للآية
الآية تصف ظاهرة الحاجز المائي بدقة، وهو الفاصل بين بحرين يلتقيان لكن لا يمتزجان امتزاجًا تامًا.
هذا الحاجز ليس جدارًا صلبًا بل منطقة انتقالية ذات خصائص متدرجة، تمنع الخلط المفاجئ للمياه.
القرآن ذكر هذه الحقيقة قبل أكثر من 14 قرنًا، بينما لم تكتشف إلا في القرن العشرين باستخدام أدوات قياس الملوحة ودرجات الحرارة في أعماق البحار.
`
    },

'الحديد نزل من الفضاء':{
      verse: '﴿وَأَنزَلْنَا الحَدِيدَ فِيهِ بَأْسٌ شَدِيدٌ﴾ [الحديد: 25]',
      content:`تشير الدراسات الفلكية الحديثة إلى أن الحديد الموجود على كوكب الأرض لم يتشكل في أصله هنا، بل أتى من الفضاء الخارجي.
       فالعلماء اكتشفوا أن الحديد عنصر ثقيل لا يتكون في التفاعلات النووية العادية داخل الشمس، بل يتشكل في أعماق النجوم العملاقة، ثم يُقذف إلى الفضاء بفعل الانفجارات النجمية الهائلة المعروفة بـ"السوبرنوفا". وخلال المراحل الأولى من تشكل الأرض، 
      وصلت شظايا نيزكية غنية بالحديد من هذه الانفجارات إلى سطحها، مكوّنةً مخزون الحديد الذي نعرفه اليوم. وهذا ينسجم بشكل لافت مع قول الله تعالى: ﴿وَأَنزَلۡنَا ٱلۡحَدِيدَ فِیهِ بَأۡسࣱ شَدِیدࣱ وَمَنَـٰفِعُ لِلنَّاسِ﴾ (الحديد: 25)، حيث تعبر كلمة
       "أنزلنا" عن إنزال الحديد من خارج الأرض، في توافق مدهش بين النص القرآني والمعرفة العلمية الحديثة.`
       
       },

'الحركة المستمرة للأرض':{
      verse: '﴿وَكُلٌّ فِي فَلَكٍ يَسْبَحُونَ﴾ [يس: 40]',
      content:`تشير الأبحاث الفلكية الحديثة إلى أن الأرض في حركة دائمة،
       فهي تدور حول محورها مرة كل 24 ساعة، مما يسبب تعاقب الليل والنهار، وتدور كذلك حول الشمس مرة كل 365 يومًا تقريبًا، مكوِّنة الفصول الأربعة. ولا تقتصر هذه الحركة على الأرض وحدها،
        بل تشمل جميع الأجرام السماوية التي تتحرك في مسارات دقيقة وثابتة تُعرف بـ"المدارات". هذا ما ينسجم مع التعبير القرآني البليغ: ﴿وَكُلٌّ فِي فَلَكٍ يَسْبَحُونَ﴾ (يس: 40)، إذ شبَّه حركة الكواكب والنجوم والأرض بالسباحة في الفضاء،
        وهو وصف دقيق يعكس الحركة الانسيابية المستمرة دون توقف أو اضطراب، كما أثبتت العلوم الحديثة.`
 },

'تحديد جنس الجنين':{
      verse: 'وأنه خلق الزوجين الذكر والأنثى من نطفة إذا تُمنى" (النجم 45-46)',
      content:`ثبت العلم الحديث أن تحديد جنس الجنين يتم لحظة التقاء الحيوان المنوي بالبويضة، حيث تحمل الحيوانات المنوية إما الكروموسوم X أو Y، بينما تحمل بويضة المرأة دائمًا الكروموسوم X 
      . فإذا كان الحيوان المنوي يحمل X، كان المولود أنثى (XX)، وإذا كان يحمل Y، كان المولود ذكرًا (XY)
      . وهذا يتطابق بدقة مع قوله تعالى: ﴿وَأَنَّهُ خَلَقَ ٱلزَّوۡجَیۡنِ ٱلذَّكَرَ وَٱلۡأُنثَىٰ ٤٥ مِن نُّطۡفَةٍ إِذَا تُمنى ٤٦﴾ (النجم: 45-46)، حيث أوضح أن أصل الذكر والأنثى من "النطفة" أي ماء الرجل، 
      وهو ما لم يكن معروفًا علميًا زمن نزول القرآن.`

 },
'خلق الإنسان من تراب':{
      verse: 'قوله تعالى: ﴿وَمِنۡ ءَایَـٰتِهِۦۤ أَنۡ خَلَقَكُم مِّن تُرَابࣲ﴾ (الروم: 20)',
      content:`كدت التحاليل الكيميائية لجسم الإنسان أن تكوينه يشمل معظم العناصر الموجودة في تربة الأرض،
       مثل الأكسجين، الكربون، الهيدروجين، النيتروجين، الكالسيوم، والحديد، 
       إضافة إلى عناصر نادرة كالبوتاسيوم والمغنيسيوم والزنك. هذه العناصر هي نفسها المكوّنة للتربة والمعادن، مما يوضح الترابط بين أصل الإنسان ومكونات الأرض.
        وهذا ينسجم تمامًا مع قوله تعالى: ﴿وَمِنۡ ءَایَـٰتِهِۦۤ أَنۡ خَلَقَكُم مِّن تُرَابࣲ﴾ (الروم: 20)، إذ يشير النص القرآني إلى الأصل المادي للإنسان من عناصر التراب، في توافق مدهش مع ما أثبته العلم الحديث من تشابه كيميائي بين جسد الإنسان وتربة الارض`
 },
   'العظام قبل العضلات':{
      verse: '﴿فَخَلَقۡنَا ٱلۡمُضۡغَةَ عِظَـٰمࣰا فَكَسَوۡنَا ٱلۡعِظَـٰمَ لَحۡمࣰا﴾ (المؤمنون: 14)',
      content:`أثبت علم الأجنة الحديث أن العظام تبدأ في التكوّن أولاً من نسيج غضروفي يتصلب تدريجيًا، 
      ثم تأتي العضلات لتكسو هذه العظام لاحقًا. ففي المراحل الجنينية، يتشكل الإطار العظمي كدعامة، وبعده تنمو الألياف العضلية حوله لتمنحه القدرة على الحركة.
       وهذا ما يطابق بدقة التعبير القرآني: ﴿فَخَلَقۡنَا ٱلۡمُضۡغَةَ عِظَـٰمࣰا فَكَسَوۡنَا ٱلۡعِظَـٰمَ لَحۡمࣰا﴾ (المؤمنون: 14)، 
       حيث ذُكر ترتيب الخلق بوضوح: العظام أولاً، ثم العضلات، وهو ما لم يُعرف علميًا إلا في العصر الحديث.`
 },

'البصمة الفريدة':{
      verse: '﴿فَخَلَقۡنَا ٱلۡمُضۡغَةَ عِظَـٰمࣰا فَكَسَوۡنَا ٱلۡعِظَـٰمَ لَحۡمࣰا﴾ (المؤمنون: 14)',
      content:`أثبت علم التشريح والبصمة أن لكل إنسان خطوطًا على أصابعه تُعرف بـ"بصمات الأصابع"،
       وهي فريدة تمامًا ولا تتطابق بين شخصين، حتى بين التوائم المتطابقة. تتكون هذه البصمات في الجنين منذ الشهر الرابع من الحمل وتظل ثابتة طوال الحياة، مما جعلها وسيلة موثوقة للتعرف على هوية الأشخاص. 
      وهذا يتوافق مع قوله تعالى: ﴿بَلَىٰ قَـٰدِرِینَ عَلَىٰۤ أَن نُّسَوِّیَ بَنَانَهُۥ﴾ (القيامة: 4)،
       حيث أشار إلى "البنان" أي أطراف الأصابع، في إشارة ضمنية إلى دقة خلقها وتفردها، وهو ما كشفه العلم الحديث بعد قرون من نزول القرآن.
`
 },


  'انفصال السماوات والأرض':{
      verse: 'قول الله تعالى: ﴿أَوَلَمۡ یَرَ ٱلَّذِینَ كَفَرُوۤا۟ أَنَّ ٱلسَّمَـٰوَ ٰ⁠تِ وَٱلۡأَرۡضَ كَانَتَا رَتۡقࣰا فَفَتَقۡنَـٰهُمَا﴾ (الأنبياء: 30)',
     content:`تشير الأبحاث الكونية الحديثة إلى أن الكون بدأ من حالة واحدة شديدة الكثافة والحرارة، ثم حدث انفجار عظيم (Big Bang)
       أدى إلى تمدده وتشكل المجرات والنجوم والكواكب. هذا الاكتشاف الذي أجمعت عليه الأدلة الفلكية يتوافق بدقة مع قول الله تعالى: ﴿أَوَلَمۡ یَرَ ٱلَّذِینَ كَفَرُوۤا۟ أَنَّ ٱلسَّمَـٰوَ ٰتِ وَٱلۡأَرۡضَ كَانَتَا رَتۡقࣰا فَفَتَقۡنَـٰهُمَا﴾ (الأنبياء: 30)
       فكلمة "رتقًا" تعني الشيء الملتصق المتماسك، و**"فتقناهما"** تعني فصلناهما، وهو وصف دقيق للحظة التي انفصلت فيها أجزاء الكون وبدأت عملية التوسع، كما يصفها نموذج الانفجار العظيم.
      `

  },
  'تعاقب الليل والنهار':{
      verse: 'یُكَوِّرُ ٱلَّیۡلَ عَلَى ٱلنَّهَارِ وَیُكَوِّرُ ٱلنَّهَارَ عَلَى ٱلَّیۡلِ﴾ (الزمر: 5)',
     content:`أثبت العلم أن تعاقب الليل والنهار يحدث نتيجة دوران الأرض حول محورها، حيث تواجه جهة الأرض المضاءة الشمس فيكون النهار،
      بينما تكون الجهة الأخرى في الظل فيحل الليل. والتعبير القرآني ﴿یُكَوِّرُ ٱلَّیۡلَ عَلَى ٱلنَّهَارِ وَیُكَوِّرُ ٱلنَّهَارَ عَلَى ٱلَّیۡلِ﴾ (الزمر: 5) يصور هذا المشهد بدقة، فكلمة "يكور" في اللغة تعني اللف والدوران،
       كما تُكور العمامة على الرأس، وهو ما يطابق تمامًا الشكل الكروي للأرض ودورانها المستمر الذي يسبب تتابع الليل والنهار بانسيابية.`

},

'الشمس والضوء':{
      verse: '﴿وَجَعَلَ ٱلشَّمۡسَ سِرَاجࣰا﴾ (نوح: 16) ',
     content:`أثبتت الدراسات الفلكية أن الشمس نجم ضخم يتكون أساسًا من الهيدروجين والهيليوم، وتنتج الضوء والحرارة
      عبر تفاعلات الاندماج النووي في قلبها، مما يجعلها المصدر الأساسي للطاقة على الأرض. 
     والتعبير القرآني **﴿وَجَعَلَ ٱلشَّمۡسَ سِرَاجࣰا﴾** *(نوح: 16)* بالغ الدقة، إذ شبَّه الشمس بالسراج الذي يصدر الضوء والحرارة،
      في إشارة واضحة إلى دورها في إنارة الأرض وإمدادها بالطاقة اللازمة للحياة.
`
},
'القمر والانعكاس':{
      verse: 'قوله تعالى: ﴿وَجَعَلَ ٱلۡقَمَرَ فِیهِنَّ نُورࣰا﴾ (نوح: 16)',
     content:`أثبت العلم أن القمر جسم معتم لا يصدر ضوءًا من ذاته، بل يعكس ضوء الشمس الساقط على سطحه نحو الأرض،
      وهو ما يجعلنا نراه منيرًا في السماء. وقد عبّر القرآن بدقة عن هذه الحقيقة
      بقوله تعالى: **﴿وَجَعَلَ ٱلۡقَمَرَ فِیهِنَّ نُورࣰا﴾** *(نوح: 16)*،
       إذ استخدم كلمة **"نور"** التي تدل على الضوء المنعكس،
        بخلاف كلمة **"سراج"** التي استعملها لوصف الشمس كمصدر ضوء ذاتي،
      في تمييز علمي دقيق بين طبيعة إضاءة الشمس والقمر.
`



},
};



 document.querySelectorAll('.open-btn').forEach(btn => { 
    btn.addEventListener('click', () => {
      const card = btn.closest('.card');
      const title = card.querySelector('.card-title').textContent.trim();
      const verse = card.querySelector('.verse').textContent.trim();
      const info = details[title] || { verse, content: 'محتوى قادم...' };
      modalTitle.textContent = title;
      modalVerse.textContent = info.verse;
      modalContent.textContent = info.content;
      modalTitle.style.direction = "rtl";
    modalVerse.style.direction = "rtl";
    modalContent.style.direction = "rtl";

    modalTitle.style.textAlign = "justify";
    modalVerse.style.textAlign = "justify";
    modalContent.style.textAlign = "justify";
      shareWA.href = `https://api.whatsapp.com/send?text=${encodeURIComponent(title + '\\n' + info.verse)}`;
      modal.setAttribute('aria-hidden', 'false');
    });
  });
  // إغلاق المودال
  function closeModal() {
  
   modal.setAttribute('aria-hidden', 'true');
  }
  modalClose.addEventListener('click', closeModal);
  modal.querySelector('.modal-backdrop').addEventListener('click', closeModal);
  document.addEventListener('keydown', (e) => { if (e.key === 'Escape') closeModal(); });

  

  // بحث بسيط يحاول التوافق مع العنوان، الآية، والوسوم
  searchInput.addEventListener('input', (e) => {
    const q = e.target.value.trim().toLowerCase();
    cards.forEach(card => {
      const title = card.querySelector('.card-title').textContent.toLowerCase();
      const verse = card.querySelector('.verse').textContent.toLowerCase();
      const tags = (card.dataset.tags || '').toLowerCase();
      const excerpt = card.querySelector('.excerpt').textContent.toLowerCase();
      const match = !q || title.includes(q) || verse.includes(q) || tags.includes(q) || excerpt.includes(q);
      card.style.display = match ? '' : 'none';
    });
  });

  // تبديل "ثيم" سريع -- هنا نغير التدرج لتنوع أزرق/أبيض بسيط
  let isAlt = false;
  themeToggle.addEventListener('click', () => {
    isAlt = !isAlt;
    if (isAlt) {
      document.documentElement.style.setProperty('--blue-1','#073b6f');
      document.documentElement.style.setProperty('--blue-2','#0b79c1');
      themeToggle.textContent = 'اللون';
    } else {
      document.documentElement.style.setProperty('--blue-1','#0d47a1');
      document.documentElement.style.setProperty('--blue-2','#1976d2');
      themeToggle.textContent = 'اللون';
    }
  });
});

function normalizeText(text) {
  return text
    .toLowerCase()
    .replace(/[أإآ]/g, 'ا')
    .replace(/ة/g, 'ه')
    .replace(/\s+/g, ' ')
    .trim();
}

document.addEventListener("DOMContentLoaded", () => {
  const navLinks = document.querySelectorAll(".nav-link");
  const sections = document.querySelectorAll("main section");

  navLinks.forEach(link => {
    link.addEventListener("click", (e) => {
      e.preventDefault();
      const target = normalizeText(link.textContent);

      sections.forEach(sec => {
        if (normalizeText(sec.dataset.section) === target) {
          sec.classList.remove("hidden");
        } else {
          sec.classList.add("hidden");
        }
      });
    });
  });
});